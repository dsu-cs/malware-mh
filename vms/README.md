# Virtual Machine Info

* [DSU IA Lab](http://ialab.dsu.edu)

## Windows VM
Several options exist for getting a Windows-based VM set up for malware analysis. Having a VM running Windows facilitates analyzing malicious Office documents and certain tasks with fewer obstacles. Some organizations, such as Mandiant have created install scripts, as seen in the [FLARE](https://github.com/mandiant/flare-vm) project. However, they come with many tools that often bloat the VM. For that reason, it can be advantageous to build your own based on your preferred toolset.

[Mike's Install Script](https://github.com/dsu-cs/malware-mh/tree/main/vms/windows-installer.ps1) accomplishes _most_ of the recommended installation/configuration changes. It is not 100% automated and manual intervention is likely necessary.

### Suggested Installation/Configuration Changes
1. Turn off Windows Defender, and make folder exclusions for where malicious samples will be stored/analyzed.
2. Utilize a package manager like [Chocolatey](https://chocolatey.org) to speed up software installation and updates. Mike's [packages.config](https://github.com/dsu-cs/malware-mh/tree/main/vms/packages.config) file has several useful utilities listed.
3. Set the PowerShell execution policy to unrestricted.
4. Create a shared folder to distribute files with the other VMs.
5. Take a snapshot.


## REMnux
[REMnux](https://remnux.org) is a Linux toolkit for reverse-engineering and analyzing malicious software. REMnux provides a curated collection of free tools created by the community. Analysts can use it to investigate malware without having to find, install, and configure the tools.

According to the [install documenation](https://docs.remnux.org/install-distro/get-virtual-appliance), REMnux does not currently support the ARM architecture. 

### Suggested Installation/Configuration Changes
1. Install the following supplemental software packages:
   * cifs-utils - used for shared folder to Windows
   * gcc-multilib - necessary to compile x32 C programs
   * [GEF](https://github.com/hugsy/gef) - plugin for GDB
   * Libre Office - analyze Office documents in Linux
   * [malware-bazaar tools](https://github.com/cocaman/malware-bazaar) - API tools for querying MalwareBazaar
   * [Metasploit docker container](https://hub.docker.com/r/metasploitframework/metasploit-framework/) - Generate shellcode in Linux
   * Python 3 jq module - parse JSON data from MalwareBazaar API
   * [pixd](https://github.com/FireyFly/pixd) - visualize binary files as images
   * [SELKS](https://github.com/StamusNetworks/SELKS) - IDS/threat hunting tools for packet analysis
   * Visual Studio Code and extensions (prettier, yara, C, python, docker) - IDE for various languages.
2. Connect to a shared folder with the Windows VM.
3. Take a snapshot.